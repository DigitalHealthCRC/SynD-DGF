<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- SynD-DGF Unified Design System - Forest Canopy Theme -->
<link rel="stylesheet" href="../assets/css/synd-design-system.css">
<link rel="stylesheet" href="../assets/css/synd-additional-components.css">

<!-- Lucide Icons -->
<script src="https://unpkg.com/lucide@latest"></script>

</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark" >
        <div class="container">
            <a class="navbar-brand" href="../index.html">SynD-DGF</a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="../index.html">Home</a>
                <a class="nav-link" href="../framework.html">Framework</a>
                <a class="nav-link" href="../assessment-tools.html">Assessment Tools</a>
                <a class="nav-link" href="../resources.html">Resources</a>
            </div>
        </div>
    </nav>

    <!-- Enhanced Breadcrumbs with Framework Context -->
<nav class="enhanced-breadcrumbs" aria-label="Breadcrumb navigation">
  <div class="breadcrumb-container">
    <div class="framework-context" id="framework-context" style="display: none;">
      <div class="context-header">
        <span class="context-icon"></span>
        <span class="context-title">Framework Step</span>
      </div>
      <div class="step-progress">
        <div class="step-indicator" data-step="1"><span class="step-number">1</span><span class="step-name">Use Case</span></div>
        <div class="step-indicator" data-step="2"><span class="step-number">2</span><span class="step-name">Source Data</span></div>
        <div class="step-indicator" data-step="3"><span class="step-number">3</span><span class="step-name">Generate Data</span></div>
        <div class="step-indicator" data-step="4"><span class="step-number">4</span><span class="step-name">Risk Assessment</span></div>
        <div class="step-indicator" data-step="5"><span class="step-number">5</span><span class="step-name">Risk Management</span></div>
      </div>
    </div>
    <ol class="breadcrumb-list">
      <li class="breadcrumb-item"><a href="/" class="breadcrumb-link"><span class="breadcrumb-icon"></span><span class="breadcrumb-text">Home</span></a></li>
      <li class="breadcrumb-item current" id="current-page"><span class="breadcrumb-text">Step 4: Assess Re-identification Risks</span></li>
    </ol>
    <div class="page-actions">
      <button class="action-button" onclick="printPage()" title="Print this page"><span class="action-icon">️</span></button>
      <button class="action-button" onclick="sharePage()" title="Share this page"><span class="action-icon"></span></button>
      <button class="action-button" onclick="bookmarkPage()" title="Bookmark this page"><span class="action-icon"></span></button>
    </div>
  </div>
</nav>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const breadcrumbList = document.querySelector('.breadcrumb-list');
    const currentPageItem = document.getElementById('current-page');
    const frameworkContext = document.getElementById('framework-context');

    function buildBreadcrumbs() {
        const breadcrumbs = [{ url: '/framework-overview', text: 'Framework', icon: '' }];
        const li = document.createElement('li');
        li.className = 'breadcrumb-item dynamic-breadcrumb';
        const link = document.createElement('a');
        link.href = breadcrumbs[0].url;
        link.className = 'breadcrumb-link';
        link.innerHTML = `<span class="breadcrumb-icon">${breadcrumbs[0].icon}</span><span class="breadcrumb-text">${breadcrumbs[0].text}</span>`;
        li.appendChild(link);
        breadcrumbList.insertBefore(li, currentPageItem);
        showFrameworkContext(4);
    }

    function showFrameworkContext(currentStep) {
        frameworkContext.style.display = 'block';
        document.querySelectorAll('.step-indicator').forEach((indicator, index) => {
            const stepNumber = index + 1;
            indicator.classList.remove('completed', 'current', 'upcoming');
            if (stepNumber < currentStep) indicator.classList.add('completed');
            else if (stepNumber === currentStep) indicator.classList.add('current');
            else indicator.classList.add('upcoming');
        });
    }

    buildBreadcrumbs();
});

function printPage() { window.print(); }
function sharePage() {
    if (navigator.share) navigator.share({ title: document.title, url: window.location.href });
    else navigator.clipboard.writeText(window.location.href).then(() => alert('Page URL copied to clipboard'));
}
function bookmarkPage() {
    let bookmarks = JSON.parse(localStorage.getItem('synd-bookmarks') || '[]');
    bookmarks.push({ title: document.title, url: window.location.href, timestamp: new Date().toISOString() });
    localStorage.setItem('synd-bookmarks', JSON.stringify(bookmarks));
    alert('Page bookmarked successfully');
}
</script>

    <div class="container">
        <div class="row">
            <div class="col-md-12">

                <h1>Step 4: Assess re-identification risks</h1>
                
                <div class="step-intro">
                    <p class="lead">Even synthetic data can pose re-identification risks. This step ensures your synthetic dataset meets the "very low risk" threshold required for safe use and sharing.</p>
                    <div class="step-objectives">
                        <h2>Step objectives</h2>
                        <ul>
                            <li>Apply appropriate de-identification techniques to reduce privacy risks</li>
                            <li>Conduct systematic re-identification risk assessment using established methodologies</li>
                            <li>Test for data leakage and membership inference vulnerabilities</li>
                            <li>Implement additional privacy-preserving measures if risks are too high</li>
                            <li>Document risk assessment results and mitigation strategies</li>
                        </ul>
                    </div>
                </div>

                <div class="risk-overview content-section-card">
                    <h2>Understanding re-identification risks in synthetic data</h2>
                    <p>While synthetic data is designed to protect privacy, it can still pose re-identification risks through several mechanisms:</p>

                    <div class="risk-types">
                        <div class="risk-card" data-component-theme="portalThemeColorRed">
                            <h3>Direct re-identification</h3>
                            <p>Synthetic records that too closely resemble real individuals in the source dataset.</p>
                            <ul>
                                <li>Synthetic records identical or very similar to real records</li>
                                <li>Preservation of unique or rare characteristic combinations</li>
                                <li>Insufficient noise or perturbation in generation process</li>
                            </ul>
                        </div>

                        <div class="risk-card" data-component-theme="portalThemeColorOrange">
                            <h3>Statistical disclosure</h3>
                            <p>Inference of information about individuals through statistical analysis of synthetic data.</p>
                            <ul>
                                <li>Small cell sizes allowing individual identification</li>
                                <li>Preservation of rare statistical patterns</li>
                                <li>Ability to infer sensitive attributes from quasi-identifiers</li>
                            </ul>
                        </div>

                        <div class="risk-card" data-component-theme="portalThemeColorPurple">
                            <h3>Membership inference</h3>
                            <p>Determining whether a specific individual was included in the original training dataset.</p>
                            <ul>
                                <li>Model overfitting to specific training examples</li>
                                <li>Distinguishable patterns in synthetic data generation</li>
                                <li>Statistical testing revealing training set membership</li>
                            </ul>
                        </div>

                        <div class="risk-card" data-component-theme="portalThemeColorBlue">
                            <h3>Attribute inference</h3>
                            <p>Learning sensitive information about individuals through correlation analysis.</p>
                            <ul>
                                <li>Strong correlations between public and sensitive attributes</li>
                                <li>Preserved relationships allowing inference attacks</li>
                                <li>Combination with external datasets for linkage</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="deidentification-techniques content-section-card">
                    <h2>De-identification techniques for synthetic data</h2>
                    <p>Apply these techniques to reduce re-identification risks before conducting formal risk assessment:</p>

                    <div class="technique-sections">
                        <div class="technique-card">
                            <h3>K-anonymity</h3>
                            <div class="technique-content">
                                <p><strong>Principle:</strong> Ensure that each record is indistinguishable from at least k-1 other records with respect to quasi-identifying attributes.</p>
                                
                                <div class="technique-details">
                                    <h4>Implementation for synthetic data</h4>
                                    <ul>
                                        <li>Identify quasi-identifying attributes (age, gender, postcode, etc.)</li>
                                        <li>Check that each combination appears at least k times in synthetic dataset</li>
                                        <li>Suppress or generalise combinations with fewer than k occurrences</li>
                                        <li>Common k values: 3-5 for high privacy, 10+ for very high privacy</li>
                                    </ul>

                                    <h4>Advantages</h4>
                                    <ul>
                                        <li>Well-established and widely understood</li>
                                        <li>Provides clear privacy guarantee</li>
                                        <li>Relatively simple to implement and validate</li>
                                        <li>Suitable for most tabular health datasets</li>
                                    </ul>

                                    <h4>Limitations</h4>
                                    <ul>
                                        <li>Vulnerable to homogeneity attacks</li>
                                        <li>May require significant data suppression</li>
                                        <li>Does not prevent attribute inference</li>
                                        <li>Can reduce data utility for detailed analysis</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="technique-card">
                            <h3>L-diversity</h3>
                            <div class="technique-content">
                                <p><strong>Principle:</strong> Extend k-anonymity by ensuring each equivalence class has at least l "well-represented" values for sensitive attributes.</p>
                                
                                <div class="technique-details">
                                    <h4>Implementation for synthetic data</h4>
                                    <ul>
                                        <li>Define sensitive attributes (diagnosis, income, etc.)</li>
                                        <li>Ensure diverse representation of sensitive values within each quasi-identifier group</li>
                                        <li>Apply entropy or recursive diversity measures</li>
                                        <li>Balance diversity requirements with data utility</li>
                                    </ul>

                                    <h4>Applications</h4>
                                    <ul>
                                        <li>Health datasets with clear sensitive attributes</li>
                                        <li>When homogeneity attacks are a concern</li>
                                        <li>Datasets with categorical sensitive variables</li>
                                        <li>Research requiring preserved sensitive attribute distributions</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="technique-card">
                            <h3>Differential privacy</h3>
                            <div class="technique-content">
                                <p><strong>Principle:</strong> Provide mathematical guarantees that individual records cannot be distinguished, even by computationally powerful adversaries.</p>
                                
                                <div class="technique-details">
                                    <h4>Implementation approaches</h4>
                                    <ul>
                                        <li><strong>Input perturbation:</strong> Add noise to source data before model training</li>
                                        <li><strong>Algorithm perturbation:</strong> Add noise during the learning process</li>
                                        <li><strong>Output perturbation:</strong> Add noise to synthetic data generation</li>
                                        <li><strong>Post-processing:</strong> Apply differential privacy to generated synthetic data</li>
                                    </ul>

                                    <h4>Key parameters</h4>
                                    <ul>
                                        <li><strong>ε (epsilon):</strong> Privacy budget - smaller values mean stronger privacy (typical: 0.1-10)</li>
                                        <li><strong>δ (delta):</strong> Probability of privacy violation (typical: 1/n where n is dataset size)</li>
                                        <li><strong>Sensitivity:</strong> Maximum change in output from adding/removing one record</li>
                                        <li><strong>Noise mechanism:</strong> Laplace, Gaussian, or exponential noise addition</li>
                                    </ul>

                                    <h4>Advantages</h4>
                                    <ul>
                                        <li>Strongest theoretical privacy guarantees</li>
                                        <li>Robust against any re-identification attack</li>
                                        <li>Composable across multiple data releases</li>
                                        <li>Growing acceptance in research and policy</li>
                                    </ul>

                                    <h4>Limitations</h4>
                                    <ul>
                                        <li>Can significantly reduce data utility</li>
                                        <li>Complex to implement correctly</li>
                                        <li>Requires careful parameter tuning</li>
                                        <li>May not preserve complex statistical relationships</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="technique-card">
                            <h3>Suppression and generalisation</h3>
                            <div class="technique-content">
                                <p><strong>Principle:</strong> Remove or generalise identifying or quasi-identifying information to reduce re-identification risks.</p>
                                
                                <div class="technique-details">
                                    <h4>Suppression strategies</h4>
                                    <ul>
                                        <li><strong>Record suppression:</strong> Remove entire synthetic records with high risk characteristics</li>
                                        <li><strong>Cell suppression:</strong> Remove specific values while retaining other record information</li>
                                        <li><strong>Attribute suppression:</strong> Remove entire variables from synthetic dataset</li>
                                        <li><strong>Conditional suppression:</strong> Remove data based on specific risk conditions</li>
                                    </ul>

                                    <h4>Generalisation approaches</h4>
                                    <ul>
                                        <li><strong>Temporal generalisation:</strong> Use broader time periods (year instead of date)</li>
                                        <li><strong>Geographic generalisation:</strong> Use larger geographic regions</li>
                                        <li><strong>Categorical generalisation:</strong> Use broader category groups</li>
                                        <li><strong>Numerical generalisation:</strong> Use ranges instead of exact values</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="risk-assessment-methodology content-section-card">
                    <h2>Re-identification risk assessment methodology</h2>
                    <p>Conduct systematic risk assessment using established approaches:</p>

                    <div class="methodology-steps">
                        <div class="methodology-step">
                            <h3>Step 1: Identify quasi-identifiers</h3>
                            <div class="step-content">
                                <p>Systematically identify attributes that could be used for re-identification:</p>
                                <ul>
                                    <li><strong>Demographic attributes:</strong> Age, gender, ethnicity, marital status</li>
                                    <li><strong>Geographic attributes:</strong> Postcode, suburb, state/territory</li>
                                    <li><strong>Temporal attributes:</strong> Admission dates, birth dates, event dates</li>
                                    <li><strong>Clinical attributes:</strong> Rare diagnoses, procedures, medications</li>
                                    <li><strong>Administrative attributes:</strong> Provider identifiers, episode numbers</li>
                                </ul>
                                <div class="assessment-tool">
                                    <a href="../assessment-tools.html" class="btn-modern-primary">Use Quasi-identifier Checklist</a>
                                </div>
                            </div>
                        </div>

                        <div class="methodology-step">
                            <h3>Step 2: Calculate uniqueness measures</h3>
                            <div class="step-content">
                                <p>Assess how unique records are based on quasi-identifier combinations:</p>
                                <ul>
                                    <li><strong>Sample uniqueness:</strong> Records unique in the synthetic dataset</li>
                                    <li><strong>Population uniqueness:</strong> Estimated uniqueness in the broader population</li>
                                    <li><strong>Equivalence class sizes:</strong> Distribution of group sizes for quasi-identifier combinations</li>
                                    <li><strong>Special uniques:</strong> Records with very rare characteristic combinations</li>
                                </ul>
                                <div class="uniqueness-calculator">
                                    <h4>Acceptable uniqueness thresholds</h4>
                                    <ul>
                                        <li><strong>Very low risk:</strong> <5% of records are unique on key quasi-identifiers</li>
                                        <li><strong>Low risk:</strong> 5-10% of records are unique</li>
                                        <li><strong>Medium risk:</strong> 10-20% of records are unique</li>
                                        <li><strong>High risk:</strong> >20% of records are unique</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="methodology-step">
                            <h3>Step 3: Assess membership inference risks</h3>
                            <div class="step-content">
                                <p>Test whether attackers could determine if individuals were in the training data:</p>
                                <ul>
                                    <li><strong>Statistical tests:</strong> Compare synthetic data distributions to known external datasets</li>
                                    <li><strong>Machine learning attacks:</strong> Train classifiers to distinguish synthetic from real records</li>
                                    <li><strong>Overfitting detection:</strong> Identify synthetic records too similar to training examples</li>
                                    <li><strong>Linkage attacks:</strong> Test synthetic data linkage with external datasets</li>
                                </ul>
                                <div class="inference-testing">
                                    <h4>Testing approaches</h4>
                                    <ul>
                                        <li>Split source data into training/testing sets before synthetic generation</li>
                                        <li>Train membership inference classifiers on synthetic vs. holdout data</li>
                                        <li>Measure classifier accuracy - should be close to random (50%)</li>
                                        <li>Test multiple quasi-identifier combinations and attack scenarios</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="methodology-step">
                            <h3>Step 4: Evaluate attribute inference risks</h3>
                            <div class="step-content">
                                <p>Assess whether sensitive attributes can be inferred from non-sensitive ones:</p>
                                <ul>
                                    <li><strong>Correlation analysis:</strong> Identify strong correlations between public and sensitive attributes</li>
                                    <li><strong>Prediction accuracy:</strong> Train models to predict sensitive attributes from public ones</li>
                                    <li><strong>Information gain:</strong> Measure how much synthetic data reveals about sensitive attributes</li>
                                    <li><strong>Linkage vulnerability:</strong> Test combination with external datasets for inference</li>
                                </ul>
                            </div>
                        </div>

                        <div class="methodology-step">
                            <h3>Step 5: Overall risk classification</h3>
                            <div class="step-content">
                                <p>Combine individual risk assessments into overall risk level:</p>
                                <div class="risk-matrix">
                                    <h4>Risk level definitions</h4>
                                    <div class="risk-levels">
                                        <div class="risk-level very-low">
                                            <h5>Very low risk</h5>
                                            <p>Safe for intended use and sharing. Proceed with Step 5.</p>
                                            <ul>
                                                <li>Uniqueness <5% on key quasi-identifiers</li>
                                                <li>Membership inference accuracy ≤55%</li>
                                                <li>Attribute inference accuracy below baseline</li>
                                                <li>No obvious linkage vulnerabilities identified</li>
                                            </ul>
                                        </div>
                                        <div class="risk-level low">
                                            <h5>Low risk</h5>
                                            <p>Acceptable with additional safeguards. Apply extra controls in Step 5.</p>
                                            <ul>
                                                <li>Uniqueness 5-10% on key quasi-identifiers</li>
                                                <li>Membership inference accuracy 55-65%</li>
                                                <li>Limited attribute inference capabilities</li>
                                                <li>Linkage risks can be managed through access controls</li>
                                            </ul>
                                        </div>
                                        <div class="risk-level medium-high">
                                            <h5>Medium to high risk</h5>
                                            <p>Requires additional de-identification before proceeding.</p>
                                            <ul>
                                                <li>Uniqueness >10% on key quasi-identifiers</li>
                                                <li>Membership inference accuracy >65%</li>
                                                <li>Strong attribute inference capabilities</li>
                                                <li>Significant linkage vulnerabilities</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="risk-mitigation content-section-card">
                    <h2>Risk mitigation strategies</h2>
                    <p>If risk assessment indicates more than very low risk, apply additional mitigation measures:</p>

                    <div class="mitigation-strategies">
                        <div class="strategy-category">
                            <h3>Data-level mitigations</h3>
                            <ul>
                                <li><strong>Additional suppression:</strong> Remove more records or attributes with high risk</li>
                                <li><strong>Increased generalisation:</strong> Use broader categories for quasi-identifiers</li>
                                <li><strong>Enhanced noise addition:</strong> Apply stronger differential privacy parameters</li>
                                <li><strong>Rare value handling:</strong> Special treatment of very uncommon characteristics</li>
                                <li><strong>Temporal perturbation:</strong> Add noise to dates and temporal patterns</li>
                            </ul>
                        </div>

                        <div class="strategy-category">
                            <h3>Model-level mitigations</h3>
                            <ul>
                                <li><strong>Model retraining:</strong> Retrain with stronger privacy-preserving parameters</li>
                                <li><strong>Ensemble approaches:</strong> Combine multiple models to reduce individual model risks</li>
                                <li><strong>Adversarial training:</strong> Train models to resist re-identification attacks</li>
                                <li><strong>Regularisation:</strong> Apply stronger regularisation to prevent overfitting</li>
                                <li><strong>Federated learning:</strong> Train models without centralising source data</li>
                            </ul>
                        </div>

                        <div class="strategy-category">
                            <h3>Access-level mitigations</h3>
                            <ul>
                                <li><strong>Restricted access:</strong> Limit data access to authorised users only</li>
                                <li><strong>Purpose limitation:</strong> Restrict use to specific approved purposes</li>
                                <li><strong>Output controls:</strong> Review and approve any published results</li>
                                <li><strong>Audit trails:</strong> Comprehensive logging of all data access and use</li>
                                <li><strong>Time limits:</strong> Restrict access duration and require periodic review</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="decision-criteria content-section-card">
                    <h2>Decision criteria for Step 4</h2>
                    <p>To proceed to Step 5, your re-identification risk assessment must confirm:</p>
                    
                    <div class="criteria-checklist">
                        <div class="criteria-item">
                            <input type="checkbox" id="criteria1">
                            <label for="criteria1">Comprehensive risk assessment completed using established methodologies</label>
                        </div>
                        <div class="criteria-item">
                            <input type="checkbox" id="criteria2">
                            <label for="criteria2">Appropriate de-identification techniques applied to synthetic dataset</label>
                        </div>
                        <div class="criteria-item">
                            <input type="checkbox" id="criteria3">
                            <label for="criteria3">Overall re-identification risk assessed as very low or low</label>
                        </div>
                        <div class="criteria-item">
                            <input type="checkbox" id="criteria4">
                            <label for="criteria4">Membership inference and attribute inference risks within acceptable bounds</label>
                        </div>
                        <div class="criteria-item">
                            <input type="checkbox" id="criteria5">
                            <label for="criteria5">Risk assessment results comprehensively documented</label>
                        </div>
                        <div class="criteria-item">
                            <input type="checkbox" id="criteria6">
                            <label for="criteria6">Additional mitigation strategies identified for implementation in Step 5</label>
                        </div>
                    </div>

                    <div class="decision-outcome">
                        <div class="outcome-proceed">
                            <h3>✓ Proceed to Step 5</h3>
                            <p>Your synthetic data meets the required privacy standards. Continue to implement comprehensive safeguards for data use and sharing.</p>
                            <a href="step-5-manage-residual-risks.html" class="btn-modern-primary">Continue to Step 5</a>
                        </div>
                        <div class="outcome-complex">
                            <h3>⚠️ Complex scenario - additional assessment required</h3>
                            <p>If re-identification risk is assessed as more than very low, your project requires additional assessment:</p>
                            <ul>
                                <li><strong>Medium to high risk:</strong> The project must be paused until additional mitigation measures are implemented</li>
                                <li><strong>Lawful pathway determination:</strong> A lawful pathway to proceed must be established before continuing</li>
                                <li><strong>Additional safeguards:</strong> Enhanced controls and monitoring must be implemented</li>
                                <li><strong>Legal review:</strong> Seek legal advice on privacy compliance for higher-risk scenarios</li>
                            </ul>
                            <p><a href="../resources.html" class="btn-modern-primary">Access Complex Scenarios Guide</a></p>
                        </div>
                    </div>
                </div>

                <!-- Content Tagging, Cross-Reference, Related Resources -->
<div class="content-tagging-system" id="content-tagging-system">
  <div class="page-tags-section" id="page-tags">
    <div class="tags-header"><span class="tags-icon">️</span><span class="tags-label">Content tags:</span></div>
    <div class="tags-container" id="current-page-tags"></div>
  </div>
</div>

<nav class="cross-reference-nav" aria-label="Cross-reference navigation">
  <div class="cross-ref-container">
    <div class="cross-ref-section appendices-section" id="related-appendices">
      <div class="section-header"><span class="section-icon"></span><h4 class="section-title">Related appendices</h4></div>
      <div class="cross-ref-items" id="appendices-list"></div>
    </div>
    <div class="cross-ref-section tools-section" id="related-tools">
      <div class="section-header"><span class="section-icon">️</span><h4 class="section-title">Recommended tools</h4></div>
      <div class="cross-ref-items" id="tools-list"></div>
    </div>
    <div class="cross-ref-section next-steps-section" id="next-steps">
      <div class="section-header"><span class="section-icon">️</span><h4 class="section-title">Next steps</h4></div>
      <div class="cross-ref-items" id="next-steps-list"></div>
    </div>
  </div>
</nav>

<section class="related-resources-section" aria-label="Related resources">
  <div class="related-resources-container">
    <div class="section-header">
      <h3 class="section-title"><span class="title-icon"></span>Related resources</h3>
      <p class="section-description">Discover additional resources relevant to this content</p>
    </div>
    <div class="resource-category quick-access" id="quick-access-resources">
      <div class="category-header"><span class="category-icon"></span><h4 class="category-title">Quick access</h4></div>
      <div class="resource-grid" id="quick-access-grid"></div>
    </div>
    <div class="resource-category documentation" id="documentation-resources">
      <div class="category-header"><span class="category-icon"></span><h4 class="category-title">Documentation</h4></div>
      <div class="resource-grid" id="documentation-grid"></div>
    </div>
  </div>
</section>

                <div class="common-scenarios">
                    <h2>Common scenarios and guidance</h2>
                    <div class="scenario-accordion">
                        <div class="scenario-item">
                            <button class="scenario-header" data-toggle="collapse" data-target="#scenario1">
                                <h3>High uniqueness in synthetic data</h3>
                                <span class="toggle-icon">+</span>
                            </button>
                            <div id="scenario1" class="scenario-content collapse">
                                <p><strong>Situation:</strong> Risk assessment shows >10% of synthetic records are unique on key quasi-identifiers.</p>
                                <p><strong>Guidance:</strong></p>
                                <ul>
                                    <li>Apply additional generalisation to quasi-identifying attributes (age groups, broader geographies)</li>
                                    <li>Consider increasing k-anonymity threshold (e.g., from k=5 to k=10)</li>
                                    <li>Suppress records with very rare characteristic combinations</li>
                                    <li>Retrain generation model with stronger privacy parameters</li>
                                    <li>Evaluate if data utility remains acceptable after additional privacy measures</li>
                                </ul>
                                <p><strong>Related tool:</strong> <a href="../tools/risk-evaluation.html">Risk Evaluation Tool</a></p>
                            </div>
                        </div>

                        <div class="scenario-item">
                            <button class="scenario-header" data-toggle="collapse" data-target="#scenario2">
                                <h3>Membership inference vulnerabilities</h3>
                                <span class="toggle-icon">+</span>
                            </button>
                            <div id="scenario2" class="scenario-content collapse">
                                <p><strong>Situation:</strong> Membership inference attacks achieve >65% accuracy in identifying training set membership.</p>
                                <p><strong>Guidance:</strong></p>
                                <ul>
                                    <li>Indicates potential model overfitting to training data</li>
                                    <li>Retrain model with stronger regularisation or early stopping</li>
                                    <li>Apply differential privacy during model training</li>
                                    <li>Use smaller training dataset subsamples</li>
                                    <li>Consider ensemble approaches to reduce memorisation</li>
                                </ul>
                                <p><strong>Key consideration:</strong> Membership inference risks are particularly concerning for small populations.</p>
                            </div>
                        </div>

                        <div class="scenario-item">
                            <button class="scenario-header" data-toggle="collapse" data-target="#scenario3">
                                <h3>Balancing privacy and utility</h3>
                                <span class="toggle-icon">+</span>
                            </button>
                            <div id="scenario3" class="scenario-content collapse">
                                <p><strong>Situation:</strong> Privacy measures significantly reduce data utility for intended analyses.</p>
                                <p><strong>Guidance:</strong></p>
                                <ul>
                                    <li>Prioritise privacy protection over utility - privacy cannot be compromised</li>
                                    <li>Evaluate if alternative analytical approaches can work with more private data</li>
                                    <li>Consider using access controls rather than additional de-identification</li>
                                    <li>Test if specific analyses can tolerate the privacy-utility tradeoff</li>
                                    <li>Document limitations for data users and adjust expectations</li>
                                </ul>
                                <p><strong>Important:</strong> If utility is insufficient, synthetic data may not be appropriate for your use case.</p>
                            </div>
                        </div>

                        <div class="scenario-item">
                            <button class="scenario-header" data-toggle="collapse" data-target="#scenario4">
                                <h3>External data linkage risks</h3>
                                <span class="toggle-icon">+</span>
                            </button>
                            <div id="scenario4" class="scenario-content collapse">
                                <p><strong>Situation:</strong> Synthetic data could be linked with publicly available or external datasets.</p>
                                <p><strong>Guidance:</strong></p>
                                <ul>
                                    <li>Identify external datasets that could be used for linkage attacks</li>
                                    <li>Test linkage vulnerability using known external data sources</li>
                                    <li>Apply additional generalisation to attributes present in external datasets</li>
                                    <li>Consider temporal perturbation for date-based linkage protection</li>
                                    <li>Document known linkage vulnerabilities and implement access controls</li>
                                </ul>
                                <p><strong>Related resource:</strong> <a href="../resources/appendices/deidentification-techniques.html">Appendix 7: De-identification Techniques</a></p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="step-navigation">
                    <div class="nav-buttons">
                        <a href="step-3-generate-synthetic-data.html" class="nav-button nav-previous">← Step 3: Generate Synthetic Data</a>
                        <a href="step-5-manage-residual-risks.html" class="nav-button nav-next">Step 5: Manage Residual Risks →</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
// Content Tagging
document.addEventListener('DOMContentLoaded', function() {
    const tags = ['step-4', 'risk-assessment', 'privacy', 'reidentification', 'deidentification', 'k-anonymity'];
    const container = document.getElementById('current-page-tags');
    tags.forEach(tag => {
        const el = document.createElement('span');
        el.className = 'content-tag';
        el.textContent = tag.split('-').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' ');
        container.appendChild(el);
    });
});

// Cross-Reference Navigation
document.addEventListener('DOMContentLoaded', function() {
    const refs = {
        appendices: [
            { id: 6, title: 'Technical assessment', url: '/web-pages/../resources/appendices/technical-assessment.html', description: 'Risk assessment methodologies' },
            { id: 7, title: 'De-identification techniques', url: '/web-pages/../resources/appendices/deidentification-techniques.html', description: 'Comprehensive privacy protection methods' }
        ],
        tools: [
            { title: 'Risk Evaluation Tool', url: '/web-pages/../tools/risk-evaluation.html', description: 'Systematic re-identification risk assessment' }
        ],
        nextSteps: [
            { title: 'Step 5: Manage Residual Risks', url: '/web-pages/step-5-manage-residual-risks.html', description: 'Implement comprehensive safeguards' }
        ]
    };

    function populate(id, items, type) {
        const container = document.getElementById(id);
        if (!container || !items || items.length === 0) {
            if (container) container.parentElement.style.display = 'none';
            return;
        }
        items.forEach(item => {
            const div = document.createElement('div');
            div.className = `cross-ref-item ${type}-item`;
            div.innerHTML = `<a href="${item.url}" class="cross-ref-link">
                <span class="item-icon">${type === 'appendix' ? item.id : type === 'tool' ? '️' : '️'}</span>
                <div class="item-content">
                    <span class="item-title">${item.title}</span>
                    <span class="item-description">${item.description}</span>
                </div>
            </a>`;
            container.appendChild(div);
        });
    }

    populate('appendices-list', refs.appendices, 'appendix');
    populate('tools-list', refs.tools, 'tool');
    populate('next-steps-list', refs.nextSteps, 'next-step');
});

// Related Resources
document.addEventListener('DOMContentLoaded', function() {
    const resources = {
        quickAccess: [
            { title: 'Framework overview', url: '/web-pages/../framework.html', description: 'Complete framework guide', tags: ['framework'] },
            { title: 'Assessment tools', url: '/web-pages/../assessment-tools.html', description: 'Interactive tools', tags: ['tools'] }
        ],
        documentation: [
            { title: 'De-identification guide', url: '/web-pages/../resources/appendices/deidentification-techniques.html', description: 'Privacy protection methods', tags: ['privacy', 'techniques'] }
        ]
    };

    function populateResources(gridId, items) {
        const grid = document.getElementById(gridId);
        if (!grid || !items || items.length === 0) {
            if (grid) grid.parentElement.style.display = 'none';
            return;
        }
        items.forEach(item => {
            const card = document.createElement('div');
            card.className = 'resource-card';
            card.innerHTML = `<a href="${item.url}" class="resource-link">
                <div class="resource-content">
                    <h5 class="resource-title">${item.title}</h5>
                    <p class="resource-description">${item.description}</p>
                    <div class="resource-tags">${item.tags.map(tag => `<span class="resource-tag">${tag}</span>`).join('')}</div>
                </div>
                <div class="resource-arrow">→</div>
            </a>`;
            grid.appendChild(card);
        });
    }

    populateResources('quick-access-grid', resources.quickAccess);
    populateResources('documentation-grid', resources.documentation);
});

// Accordion functionality
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.scenario-header').forEach(header => {
        header.addEventListener('click', function() {
            const target = document.querySelector(this.getAttribute('data-target'));
            const icon = this.querySelector('.toggle-icon');
            if (target.classList.contains('show')) {
                target.classList.remove('show');
                icon.textContent = '+';
            } else {
                document.querySelectorAll('.scenario-content').forEach(sc => sc.classList.remove('show'));
                document.querySelectorAll('.toggle-icon').forEach(ti => ti.textContent = '+');
                target.classList.add('show');
                icon.textContent = '−';
            }
        });
    });
});
</script>

    <!-- Back to Top Button -->
    <button onclick="scrollToTop()" id="backToTop" style="display: none; position: fixed; bottom: 20px; right: 20px; z-index: 99; background: #F7C59F; color: white; border: none; padding: 15px 18px; border-radius: 50%; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.2); font-size: 1.2rem; font-weight: bold;">↑</button>

    <script>
    // Back to Top functionality
    window.onscroll = function() {
        const backToTop = document.getElementById('backToTop');
        if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
            backToTop.style.display = "block";
        } else {
            backToTop.style.display = "none";
        }
    };

    function scrollToTop() {
        window.scrollTo({top: 0, behavior: 'smooth'});
    }
    </script>

    <!-- OpenAI ChatKit Chatbot -->
    <link rel="stylesheet" href="../assets/chatbot/chatbot.css">
    <script src="https://cdn.platform.openai.com/deployments/chatkit/chatkit.js" async></script>
    <script src="../assets/chatbot/sloth-avatar.js"></script>
    <script src="../assets/chatbot/chatbot.js"></script>
</body>
</html>
