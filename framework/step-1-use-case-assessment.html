<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- SynD-DGF Unified Design System - Forest Canopy Theme -->
<link rel="stylesheet" href="../assets/css/synd-design-system.css">
<link rel="stylesheet" href="../assets/css/synd-additional-components.css">

<!-- Lucide Icons -->
<script src="https://unpkg.com/lucide@latest"></script>

</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark" >
        <div class="container">
            <a class="navbar-brand" href="../index.html">SynD-DGF</a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="../index.html">Home</a>
                <a class="nav-link" href="../framework.html">Framework</a>
                <a class="nav-link" href="../assessment-tools.html">Assessment Tools</a>
                <a class="nav-link" href="../resources.html">Resources</a>
            </div>
        </div>
    </nav>

    <!-- Enhanced Breadcrumbs with Framework Context -->
<nav class="enhanced-breadcrumbs" aria-label="Breadcrumb navigation">
  <div class="breadcrumb-container">

    <!-- Framework Step Context -->
    <div class="framework-context" id="framework-context" style="display: none;">
      <div class="context-header">
        <span class="context-icon"></span>
        <span class="context-title">Framework Step</span>
      </div>
      <div class="step-progress">
        <div class="step-indicator" data-step="1">
          <span class="step-number">1</span>
          <span class="step-name">Use Case</span>
        </div>
        <div class="step-indicator" data-step="2">
          <span class="step-number">2</span>
          <span class="step-name">Source Data</span>
        </div>
        <div class="step-indicator" data-step="3">
          <span class="step-number">3</span>
          <span class="step-name">Generate Data</span>
        </div>
        <div class="step-indicator" data-step="4">
          <span class="step-number">4</span>
          <span class="step-name">Risk Assessment</span>
        </div>
        <div class="step-indicator" data-step="5">
          <span class="step-number">5</span>
          <span class="step-name">Risk Management</span>
        </div>
      </div>
    </div>

    <!-- Standard Breadcrumbs -->
    <ol class="breadcrumb-list">
      <li class="breadcrumb-item">
        <a href="/" class="breadcrumb-link">
          <span class="breadcrumb-icon"></span>
          <span class="breadcrumb-text">Home</span>
        </a>
      </li>

      <!-- Dynamic breadcrumbs will be inserted here by JavaScript -->
      <li class="breadcrumb-item current" id="current-page">
        <span class="breadcrumb-text">Step 1: Assess Use Case</span>
      </li>
    </ol>

    <!-- Page Actions -->
    <div class="page-actions">
      <button class="action-button" onclick="printPage()" title="Print this page">
        <span class="action-icon">️</span>
      </button>
      <button class="action-button" onclick="sharePage()" title="Share this page">
        <span class="action-icon"></span>
      </button>
      <button class="action-button" onclick="bookmarkPage()" title="Bookmark this page">
        <span class="action-icon"></span>
      </button>
    </div>
  </div>
</nav>


<script>
document.addEventListener('DOMContentLoaded', function() {
    const currentPath = window.location.pathname;
    const breadcrumbList = document.querySelector('.breadcrumb-list');
    const currentPageItem = document.getElementById('current-page');
    const frameworkContext = document.getElementById('framework-context');

    // Framework step mapping
    const frameworkSteps = {
        '/framework-overview': { section: 'framework', step: 0, title: 'Framework Overview' },
        '/step-1-use-case-assessment': { section: 'framework', step: 1, title: 'Step 1: Assess Use Case' },
        '/step-2-assess-source-data': { section: 'framework', step: 2, title: 'Step 2: Assess Source Data' },
        '/step-3-generate-synthetic-data': { section: 'framework', step: 3, title: 'Step 3: Generate Synthetic Data' },
        '/step-4-assess-reidentification-risks': { section: 'framework', step: 4, title: 'Step 4: Assess Re-identification Risks' },
        '/step-5-manage-residual-risks': { section: 'framework', step: 5, title: 'Step 5: Manage Residual Risks' }
    };

    function buildBreadcrumbs() {
        // For Step 1 page specifically
        const breadcrumbs = [{
            url: '/framework-overview',
            text: 'Framework',
            icon: ''
        }];

        const stepInfo = frameworkSteps['/step-1-use-case-assessment'];
        if (stepInfo) {
            showFrameworkContext(stepInfo.step);
        }

        insertBreadcrumbs(breadcrumbs);
    }

    function insertBreadcrumbs(breadcrumbs) {
        // Remove existing dynamic breadcrumbs
        const existingBreadcrumbs = breadcrumbList.querySelectorAll('.dynamic-breadcrumb');
        existingBreadcrumbs.forEach(item => item.remove());

        // Insert new breadcrumbs before current page
        breadcrumbs.forEach((crumb) => {
            const breadcrumbItem = createBreadcrumbItem(crumb);
            breadcrumbList.insertBefore(breadcrumbItem, currentPageItem);
        });
    }

    function createBreadcrumbItem(crumb) {
        const li = document.createElement('li');
        li.className = 'breadcrumb-item dynamic-breadcrumb';

        const link = document.createElement('a');
        link.href = crumb.url;
        link.className = 'breadcrumb-link';

        const icon = document.createElement('span');
        icon.className = 'breadcrumb-icon';
        icon.textContent = crumb.icon;

        const text = document.createElement('span');
        text.className = 'breadcrumb-text';
        text.textContent = crumb.text;

        link.appendChild(icon);
        link.appendChild(text);
        li.appendChild(link);

        return li;
    }

    function showFrameworkContext(currentStep) {
        frameworkContext.style.display = 'block';

        // Update step indicators
        const stepIndicators = frameworkContext.querySelectorAll('.step-indicator');
        stepIndicators.forEach((indicator, index) => {
            const stepNumber = index + 1;
            indicator.classList.remove('completed', 'current', 'upcoming');

            if (stepNumber < currentStep) {
                indicator.classList.add('completed');
            } else if (stepNumber === currentStep) {
                indicator.classList.add('current');
            } else {
                indicator.classList.add('upcoming');
            }
        });
    }

    // Initialize breadcrumbs
    buildBreadcrumbs();
});

// Page action functions
function printPage() {
    window.print();
}

function sharePage() {
    if (navigator.share) {
        navigator.share({
            title: document.title,
            url: window.location.href
        });
    } else {
        // Fallback: copy URL to clipboard
        navigator.clipboard.writeText(window.location.href).then(() => {
            alert('Page URL copied to clipboard');
        });
    }
}

function bookmarkPage() {
    // Store bookmark in localStorage
    const bookmark = {
        title: document.title,
        url: window.location.href,
        timestamp: new Date().toISOString()
    };

    let bookmarks = JSON.parse(localStorage.getItem('synd-bookmarks') || '[]');
    bookmarks.push(bookmark);
    localStorage.setItem('synd-bookmarks', JSON.stringify(bookmarks));

    alert('Page bookmarked successfully');
}
</script>
    <div class="container">
        <div class="row">
            <div class="col-md-12">

                <h1>Step 1: Use case assessment</h1>
                
                <div class="step-intro">
                    <p class="lead">Before generating synthetic data, you must establish that your intended use case serves a clear public benefit purpose and is appropriate for synthetic data approaches.</p>
                    <div class="step-objectives">
                        <h2>Step objectives</h2>
                        <ul>
                            <li>Confirm the use case serves public benefit purposes related to health services</li>
                            <li>Ensure community notification and transparency requirements are met</li>
                            <li>Verify synthetic data is suitable for your intended analysis</li>
                            <li>Complete ethical and impact assessments including Indigenous data sovereignty</li>
                        </ul>
                    </div>
                </div>

                <div class="assessment-requirements content-section-card">
                    <h2>Assessment requirements</h2>
                    <p>Step 1 includes two mandatory assessments that must be completed before proceeding:</p>

                    <div class="requirement-card" data-component-theme="portalThemeColorBlue">
                        <h3>Use Case Assessment Checklist</h3>
                        <p>A structured evaluation covering three required tests that every synthetic data project must pass:</p>
                        
                        <div class="test-section">
                            <h4>Test 1: Public benefit purpose</h4>
                            <p>Your use case must demonstrate clear public benefit related to:</p>
                            <ul>
                                <li>Providing or improving health services to consumers</li>
                                <li>Enhancing health system outcomes and efficiency</li>
                                <li>Supporting health policy development or evaluation</li>
                                <li>Advancing health research for community benefit</li>
                            </ul>
                            <div class="assessment-question">
                                <strong>Key question:</strong> How will your project's outcomes directly benefit consumer health or the health system?
                            </div>
                        </div>

                        <div class="test-section">
                            <h4>Test 2: Community notification</h4>
                            <p>Health consumers must be informed about synthetic data use through:</p>
                            <ul>
                                <li>Public communication about synthetic data projects for public benefit</li>
                                <li>Clear explanation of how synthetic data protects individual privacy</li>
                                <li>Information about the types of research and analysis being conducted</li>
                                <li>Opportunities for community feedback on data governance approaches</li>
                            </ul>
                            <div class="assessment-question">
                                <strong>Key question:</strong> Have you communicated publicly and broadly to health consumers about using synthetic data for public benefit projects?
                            </div>
                        </div>

                        <div class="test-section">
                            <h4>Test 3: Synthetic data suitability</h4>
                            <p>Consider whether synthetic data is appropriate for your analysis:</p>
                            <ul>
                                <li>The analysis can be conducted effectively with synthetic rather than real data</li>
                                <li>Statistical relationships and patterns will be preserved in synthetic data</li>
                                <li>The intended analysis does not require precise individual-level accuracy</li>
                                <li>Alternative approaches (de-identification, aggregation) are insufficient</li>
                            </ul>
                            <div class="assessment-question">
                                <strong>Key question:</strong> Is there only a very low risk that your synthetic dataset could identify or disclose information about individuals?
                            </div>
                        </div>

                        <div class="assessment-action">
                            <a href="../tools/use-case-checklist.html" class="btn-modern-primary">Complete Use Case Assessment</a>
                        </div>
                    </div>

                    <div class="requirement-card" data-component-theme="portalThemeColorGreen">
                        <h3>Impact Assessment</h3>
                        <p>A comprehensive evaluation of broader ethical, social, and cultural considerations:</p>
                        
                        <div class="impact-section">
                            <h4>Data ethics considerations</h4>
                            <ul>
                                <li>Fairness and non-discrimination in data use and algorithmic processing</li>
                                <li>Transparency and accountability in synthetic data generation methods</li>
                                <li>Proportionality between privacy intrusion and public benefit</li>
                                <li>Potential for unintended consequences or misuse of synthetic data</li>
                            </ul>
                        </div>

                        <div class="impact-section">
                            <h4>Indigenous data sovereignty</h4>
                            <p>Special consideration must be given when source data includes information about Aboriginal and Torres Strait Islander peoples:</p>
                            <ul>
                                <li>Recognition of Indigenous peoples' rights to control data about their communities</li>
                                <li>Compliance with relevant Indigenous data governance frameworks</li>
                                <li>Consultation with appropriate Indigenous community representatives</li>
                                <li>Consideration of cultural sensitivities and community benefit</li>
                            </ul>
                            <div class="indigenous-guidance">
                                <strong>Important:</strong> Projects involving Indigenous health data should engage with relevant Aboriginal Community Controlled Health Organisations (ACCHOs) and follow established Indigenous data governance protocols.
                            </div>
                        </div>

                        <div class="impact-section">
                            <h4>Community and stakeholder impacts</h4>
                            <ul>
                                <li>Potential effects on community trust in health data systems</li>
                                <li>Implications for vulnerable or marginalised populations</li>
                                <li>Broader societal benefits and risks of the synthetic data use</li>
                                <li>Stakeholder engagement and consultation requirements</li>
                            </ul>
                        </div>

                        <div class="assessment-action">
                            <a href="../tools/impact-assessment.html" class="btn-modern-primary">Complete Impact Assessment</a>
                        </div>
                    </div>
                </div>

                <div class="decision-criteria content-section-card">
                    <h2>Decision criteria</h2>
                    <p>To proceed to Step 2, your use case must meet all the following criteria:</p>
                    
                    <div class="criteria-checklist">
                        <div class="criteria-item">
                            <input type="checkbox" id="criteria1" disabled>
                            <label for="criteria1">Use case serves a clear public benefit purpose related to health services</label>
                        </div>
                        <div class="criteria-item">
                            <input type="checkbox" id="criteria2" disabled>
                            <label for="criteria2">Community notification requirements have been met</label>
                        </div>
                        <div class="criteria-item">
                            <input type="checkbox" id="criteria3" disabled>
                            <label for="criteria3">Synthetic data is suitable and appropriate for the intended analysis</label>
                        </div>
                        <div class="criteria-item">
                            <input type="checkbox" id="criteria4" disabled>
                            <label for="criteria4">No ethical or cultural concerns that prevent the project proceeding</label>
                        </div>
                        <div class="criteria-item">
                            <input type="checkbox" id="criteria5" disabled>
                            <label for="criteria5">Indigenous data sovereignty requirements addressed (if applicable)</label>
                        </div>
                    </div>

                    <div class="decision-outcome">
                        <div class="outcome-proceed">
                            <h3>✓ Proceed to Step 2</h3>
                            <p>If all criteria are met, you can proceed to assess and prepare your source data.</p>
                            <a href="step-2-assess-source-data.html" class="btn-modern-primary">Continue to Step 2</a>
                        </div>
                        <div class="outcome-stop">
                            <h3>✗ Do not proceed</h3>
                            <p>If any criteria are not met, the project should not proceed with synthetic data generation. Consider:</p>
                            <ul>
                                <li>Revising the use case to better align with public benefit purposes</li>
                                <li>Enhancing community engagement and notification processes</li>
                                <li>Exploring alternative approaches such as aggregated statistics or traditional de-identification</li>
                                <li>Seeking additional ethical or cultural consultation</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="common-scenarios">
                    <h2>Common scenarios and guidance</h2>
                    
                    <div class="scenario-accordion">
                        <div class="scenario-item">
                            <button class="scenario-header" data-toggle="collapse" data-target="#scenario1">
                                <h3>Research and analytics projects</h3>
                                <span class="toggle-icon">+</span>
                            </button>
                            <div id="scenario1" class="scenario-content collapse">
                                <p><strong>Scenario:</strong> Using synthetic data for health services research, policy analysis, or operational improvements.</p>
                                <p><strong>Considerations:</strong></p>
                                <ul>
                                    <li>Ensure research questions can be answered with synthetic data quality</li>
                                    <li>Consider whether traditional statistical approaches might be sufficient</li>
                                    <li>Evaluate if real data insights are essential for research validity</li>
                                </ul>
                                <p><strong>Public benefit test:</strong> Must demonstrate clear improvements to health services or policy outcomes.</p>
                            </div>
                        </div>

                        <div class="scenario-item">
                            <button class="scenario-header" data-toggle="collapse" data-target="#scenario2">
                                <h3>Algorithm development and testing</h3>
                                <span class="toggle-icon">+</span>
                            </button>
                            <div id="scenario2" class="scenario-content collapse">
                                <p><strong>Scenario:</strong> Creating synthetic datasets for training machine learning models or testing analytical algorithms.</p>
                                <p><strong>Considerations:</strong></p>
                                <ul>
                                    <li>Synthetic data may not capture all edge cases present in real data</li>
                                    <li>Model performance validation should include real data testing where appropriate</li>
                                    <li>Consider bias implications of synthetic data generation methods</li>
                                </ul>
                                <p><strong>Public benefit test:</strong> Algorithms must be intended for health system improvement or patient care enhancement.</p>
                            </div>
                        </div>

                        <div class="scenario-item">
                            <button class="scenario-header" data-toggle="collapse" data-target="#scenario3">
                                <h3>Data sharing and collaboration</h3>
                                <span class="toggle-icon">+</span>
                            </button>
                            <div id="scenario3" class="scenario-content collapse">
                                <p><strong>Scenario:</strong> Sharing synthetic datasets with external researchers, other health organisations, or for public release.</p>
                                <p><strong>Considerations:</strong></p>
                                <ul>
                                    <li>Higher privacy standards required for external sharing</li>
                                    <li>Additional safeguards needed for public data releases</li>
                                    <li>Clear data sharing agreements and use restrictions essential</li>
                                </ul>
                                <p><strong>Public benefit test:</strong> Collaboration must enhance collective health outcomes beyond what individual organisations could achieve.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Content Tagging System Component -->
<div class="content-tagging-system" id="content-tagging-system">

  <!-- Page Tags Display -->
  <div class="page-tags-section" id="page-tags">
    <div class="tags-header">
      <span class="tags-icon">️</span>
      <span class="tags-label">Content tags:</span>
    </div>
    <div class="tags-container" id="current-page-tags">
      <!-- Dynamic tags will be inserted here -->
    </div>
  </div>

  <!-- Tag-Based Navigation -->
  <div class="tag-navigation-section" id="tag-navigation" style="display: none;">
    <div class="tag-nav-header">
      <h4 class="tag-nav-title">Explore by tags</h4>
      <button class="toggle-tag-nav" onclick="toggleTagNavigation()">
        <span class="toggle-icon"></span>
        <span class="toggle-text">Browse by tags</span>
      </button>
    </div>

    <!-- Tag Categories -->
    <div class="tag-categories" id="tag-categories">

      <!-- Framework Tags -->
      <div class="tag-category framework-tags">
        <h5 class="category-title">
          <span class="category-icon"></span>
          Framework process
        </h5>
        <div class="category-tags" id="framework-tag-list">
          <!-- Dynamic content -->
        </div>
      </div>

      <!-- Content Type Tags -->
      <div class="tag-category content-tags">
        <h5 class="category-title">
          <span class="category-icon"></span>
          Content types
        </h5>
        <div class="category-tags" id="content-tag-list">
          <!-- Dynamic content -->
        </div>
      </div>

      <!-- Topic Tags -->
      <div class="tag-category topic-tags">
        <h5 class="category-title">
          <span class="category-icon"></span>
          Topics
        </h5>
        <div class="category-tags" id="topic-tag-list">
          <!-- Dynamic content -->
        </div>
      </div>

      <!-- Complexity Tags -->
      <div class="tag-category complexity-tags">
        <h5 class="category-title">
          <span class="category-icon"></span>
          Complexity level
        </h5>
        <div class="category-tags" id="complexity-tag-list">
          <!-- Dynamic content -->
        </div>
      </div>

    </div>

    <!-- Tagged Content Results -->
    <div class="tagged-content-results" id="tagged-content-results" style="display: none;">
      <div class="results-header">
        <h5 class="results-title">Related content</h5>
        <button class="clear-filter" onclick="clearTagFilter()">Clear filter</button>
      </div>
      <div class="results-grid" id="results-grid">
        <!-- Dynamic content -->
      </div>
    </div>

  </div>

</div>

<!-- Cross-Reference Navigation Component -->
<nav class="cross-reference-nav" aria-label="Cross-reference navigation">
  <div class="cross-ref-container">

    <!-- Related Appendices Section -->
    <div class="cross-ref-section appendices-section" id="related-appendices">
      <div class="section-header">
        <span class="section-icon"></span>
        <h4 class="section-title">Related appendices</h4>
      </div>
      <div class="cross-ref-items" id="appendices-list">
        <!-- Dynamic content will be inserted here -->
      </div>
    </div>

    <!-- Assessment Tools Section -->
    <div class="cross-ref-section tools-section" id="related-tools">
      <div class="section-header">
        <span class="section-icon">️</span>
        <h4 class="section-title">Recommended tools</h4>
      </div>
      <div class="cross-ref-items" id="tools-list">
        <!-- Dynamic content will be inserted here -->
      </div>
    </div>

    <!-- Next Steps Section -->
    <div class="cross-ref-section next-steps-section" id="next-steps">
      <div class="section-header">
        <span class="section-icon">️</span>
        <h4 class="section-title">Next steps</h4>
      </div>
      <div class="cross-ref-items" id="next-steps-list">
        <!-- Dynamic content will be inserted here -->
      </div>
    </div>

    <!-- Related Pages Section -->
    <div class="cross-ref-section related-pages-section" id="related-pages">
      <div class="section-header">
        <span class="section-icon"></span>
        <h4 class="section-title">Related pages</h4>
      </div>
      <div class="cross-ref-items" id="related-pages-list">
        <!-- Dynamic content will be inserted here -->
      </div>
    </div>

  </div>
</nav>

<!-- Related Resources Section Component -->
<section class="related-resources-section" aria-label="Related resources">
  <div class="related-resources-container">

    <div class="section-header">
      <h3 class="section-title">
        <span class="title-icon"></span>
        Related resources
      </h3>
      <p class="section-description">Discover additional resources relevant to this content</p>
    </div>

    <!-- Quick Access Resources -->
    <div class="resource-category quick-access" id="quick-access-resources">
      <div class="category-header">
        <span class="category-icon"></span>
        <h4 class="category-title">Quick access</h4>
      </div>
      <div class="resource-grid" id="quick-access-grid">
        <!-- Dynamic content -->
      </div>
    </div>

    <!-- Documentation Resources -->
    <div class="resource-category documentation" id="documentation-resources">
      <div class="category-header">
        <span class="category-icon"></span>
        <h4 class="category-title">Documentation</h4>
      </div>
      <div class="resource-grid" id="documentation-grid">
        <!-- Dynamic content -->
      </div>
    </div>

    <!-- Assessment Resources -->
    <div class="resource-category assessment" id="assessment-resources">
      <div class="category-header">
        <span class="category-icon"></span>
        <h4 class="category-title">Assessment tools</h4>
      </div>
      <div class="resource-grid" id="assessment-grid">
        <!-- Dynamic content -->
      </div>
    </div>

    <!-- Legal & Compliance Resources -->
    <div class="resource-category legal" id="legal-resources">
      <div class="category-header">
        <span class="category-icon">️</span>
        <h4 class="category-title">Legal & compliance</h4>
      </div>
      <div class="resource-grid" id="legal-grid">
        <!-- Dynamic content -->
      </div>
    </div>

    <!-- Technical Resources -->
    <div class="resource-category technical" id="technical-resources">
      <div class="category-header">
        <span class="category-icon"></span>
        <h4 class="category-title">Technical guidance</h4>
      </div>
      <div class="resource-grid" id="technical-grid">
        <!-- Dynamic content -->
      </div>
    </div>

    <!-- View All Resources Link -->
    <div class="view-all-section">
      <a href="/web-pages/../resources.html" class="view-all-link">
        <span class="link-icon">️</span>
        <span class="link-text">View all resources</span>
        <span class="link-arrow">→</span>
      </a>
    </div>

  </div>
</section>

                <div class="step-navigation">
                    <div class="nav-buttons">
                        <a href="../framework.html" class="nav-button nav-previous">← Framework Overview</a>
                        <a href="step-2-assess-source-data.html" class="nav-button nav-next">Step 2: Assess Source Data →</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
// Content Tagging System JavaScript
document.addEventListener('DOMContentLoaded', function() {
    const currentPath = window.location.pathname;

    // Comprehensive tag database for all content
    const contentTags = {
        // Page-specific tags
        pages: {
            '/framework-overview': {
                primary: ['framework', 'overview', 'process'],
                secondary: ['beginner', 'guidance', 'introduction'],
                framework: ['overview'],
                contentType: ['guide', 'overview'],
                topics: ['synthetic-data', 'governance'],
                complexity: ['beginner']
            },
            '/step-1-use-case-assessment': {
                primary: ['step-1', 'use-case', 'assessment'],
                secondary: ['evaluation', 'criteria', 'decision-making'],
                framework: ['step-1'],
                contentType: ['step-guide', 'assessment'],
                topics: ['use-case', 'evaluation', 'suitability'],
                complexity: ['intermediate']
            }
        }
    };

    // Tag category definitions
    const tagCategories = {
        framework: {
            'overview': 'Framework Overview',
            'step-1': 'Step 1: Use Case Assessment',
            'step-2': 'Step 2: Assess Source Data',
            'step-3': 'Step 3: Generate Synthetic Data',
            'step-4': 'Step 4: Assess Re-identification Risks',
            'step-5': 'Step 5: Manage Residual Risks',
            'tools': 'Assessment Tools',
            'decision-support': 'Decision Support',
            'resources': 'Resources & Documentation'
        },
        contentType: {
            'guide': 'Process Guide',
            'overview': 'Overview',
            'step-guide': 'Step-by-Step Guide',
            'assessment': 'Assessment',
            'technical': 'Technical Guide',
            'tools': 'Interactive Tools',
            'documentation': 'Documentation',
            'reference': 'Reference Material',
            'interactive': 'Interactive Content',
            'management': 'Management Guide',
            'guidance': 'Expert Guidance'
        },
        topics: {
            'synthetic-data': 'Synthetic Data',
            'governance': 'Data Governance',
            'use-case': 'Use Case Evaluation',
            'evaluation': 'Assessment & Evaluation',
            'suitability': 'Suitability Assessment'
        },
        complexity: {
            'beginner': 'Beginner',
            'intermediate': 'Intermediate',
            'advanced': 'Advanced',
            'reference': 'Reference',
            'all-levels': 'All Levels'
        }
    };

    function initializeTaggingSystem() {
        displayCurrentPageTags();
        initializeTagCategories();
    }

    function displayCurrentPageTags() {
        const pageTagsContainer = document.getElementById('current-page-tags');
        const pageTags = getCurrentPageTags();

        if (pageTags.length === 0) {
            document.getElementById('page-tags').style.display = 'none';
            return;
        }

        pageTagsContainer.innerHTML = '';
        pageTags.forEach(tag => {
            const tagElement = createTagElement(tag, 'current-page');
            pageTagsContainer.appendChild(tagElement);
        });
    }

    function getCurrentPageTags() {
        const pageConfig = contentTags.pages[currentPath] || contentTags.pages['/step-1-use-case-assessment'];
        if (!pageConfig) return [];

        return [...(pageConfig.primary || []), ...(pageConfig.secondary || [])];
    }

    function initializeTagCategories() {
        populateTagCategory('framework-tag-list', tagCategories.framework);
        populateTagCategory('content-tag-list', tagCategories.contentType);
        populateTagCategory('topic-tag-list', tagCategories.topics);
        populateTagCategory('complexity-tag-list', tagCategories.complexity);
    }

    function populateTagCategory(containerId, categoryTags) {
        const container = document.getElementById(containerId);
        if (!container) return;

        container.innerHTML = '';
        Object.keys(categoryTags).forEach(tagKey => {
            const tagElement = createTagElement(tagKey, 'filter', categoryTags[tagKey]);
            container.appendChild(tagElement);
        });
    }

    function createTagElement(tag, type, displayName = null) {
        const tagElement = document.createElement('span');
        tagElement.className = `content-tag ${type}-tag`;
        tagElement.textContent = displayName || formatTagName(tag);
        tagElement.setAttribute('data-tag', tag);

        if (type === 'filter') {
            tagElement.onclick = () => filterByTag(tag);
            tagElement.style.cursor = 'pointer';
        }

        return tagElement;
    }

    function formatTagName(tag) {
        return tag.split('-').map(word =>
            word.charAt(0).toUpperCase() + word.slice(1)
        ).join(' ');
    }

    function filterByTag(tag) {
        // Simple placeholder - in a real system this would filter content
        alert(`Filtering by tag: ${formatTagName(tag)}`);
    }

    // Global functions for button handlers
    window.toggleTagNavigation = function() {
        const tagNav = document.getElementById('tag-navigation');
        const isVisible = tagNav.style.display !== 'none';

        if (isVisible) {
            tagNav.style.display = 'none';
        } else {
            tagNav.style.display = 'block';
        }
    };

    window.clearTagFilter = function() {
        document.getElementById('tagged-content-results').style.display = 'none';
    };

    // Initialize on page load
    initializeTaggingSystem();
});

// Cross-Reference Navigation JavaScript
document.addEventListener('DOMContentLoaded', function() {
    const currentPath = window.location.pathname;

    // Cross-reference mapping for Step 1
    const crossReferences = {
        '/step-1-use-case-assessment': {
            appendices: [
                { id: 4, title: 'Use case assessment', url: '/web-pages/../resources/appendices/use-case-assessment.html', description: 'Detailed criteria and scoring methodology' },
                { id: 5, title: 'Impact assessment', url: '/web-pages/../resources/appendices/impact-assessment.html', description: 'Privacy, ethical, and social impact evaluation' },
                { id: 9, title: 'Lawful pathways', url: '/web-pages/../resources/appendices/lawful-pathways.html', description: 'Legal pathway guidance for data sharing' }
            ],
            tools: [
                { title: 'Use Case Assessment Tool', url: '/web-pages/../tools/use-case-assessment.html', description: 'Interactive use case evaluation form' },
                { title: 'Impact Assessment Tool', url: '/web-pages/../tools/impact-assessment.html', description: 'Assess privacy and ethical implications' },
                { title: 'Legal Pathways Wizard', url: '/web-pages/../decision-support/legal-pathways-wizard.html', description: 'Determine appropriate legal pathways' }
            ],
            nextSteps: [
                { title: 'Step 2: Assess Source Data', url: '/web-pages/step-2-assess-source-data.html', description: 'Evaluate your source dataset characteristics' }
            ],
            relatedPages: [
                { title: 'Framework Overview', url: '/web-pages/../framework.html', description: 'Return to framework overview' }
            ]
        }
    };

    // Initialize cross-references for current page
    function initializeCrossReferences() {
        const pageRefs = crossReferences[currentPath] || crossReferences['/step-1-use-case-assessment'];

        populateSection('appendices-list', pageRefs.appendices || [], 'appendix');
        populateSection('tools-list', pageRefs.tools || [], 'tool');
        populateSection('next-steps-list', pageRefs.nextSteps || [], 'next-step');
        populateSection('related-pages-list', pageRefs.relatedPages || [], 'page');

        hideEmptySections();
    }

    function populateSection(containerId, items, itemType) {
        const container = document.getElementById(containerId);
        if (!container) return;

        if (items.length === 0) {
            container.parentElement.style.display = 'none';
            return;
        }

        container.innerHTML = '';

        items.forEach(item => {
            const itemElement = createCrossRefItem(item, itemType);
            container.appendChild(itemElement);
        });
    }

    function createCrossRefItem(item, itemType) {
        const div = document.createElement('div');
        div.className = `cross-ref-item ${itemType}-item`;

        const link = document.createElement('a');
        link.href = item.url;
        link.className = 'cross-ref-link';

        const icon = document.createElement('span');
        icon.className = 'item-icon';
        icon.textContent = getItemIcon(itemType, item);

        const content = document.createElement('div');
        content.className = 'item-content';

        const title = document.createElement('span');
        title.className = 'item-title';
        title.textContent = item.title;

        const description = document.createElement('span');
        description.className = 'item-description';
        description.textContent = item.description;

        content.appendChild(title);
        content.appendChild(description);

        link.appendChild(icon);
        link.appendChild(content);
        div.appendChild(link);

        return div;
    }

    function getItemIcon(itemType, item) {
        switch (itemType) {
            case 'appendix':
                return item.id ? item.id.toString() : '';
            case 'tool':
                return '️';
            case 'next-step':
                return '️';
            case 'page':
                return '';
            default:
                return '';
        }
    }

    function hideEmptySections() {
        const sections = document.querySelectorAll('.cross-ref-section');
        sections.forEach(section => {
            const items = section.querySelector('.cross-ref-items');
            if (!items || items.children.length === 0) {
                section.style.display = 'none';
            }
        });
    }

    // Initialize on page load
    initializeCrossReferences();
});

// Related Resources JavaScript
document.addEventListener('DOMContentLoaded', function() {
    const currentPath = window.location.pathname;

    // Resource database for Step 1
    const resourceDatabase = {
        quickAccess: [
            {
                title: 'Framework overview',
                url: '/web-pages/../framework.html',
                description: 'Complete framework process guide',
                tags: ['framework', 'overview', 'process']
            },
            {
                title: 'Assessment tools overview',
                url: '/web-pages/../assessment-tools.html',
                description: 'Interactive assessment tools',
                tags: ['assessment', 'tools', 'interactive']
            }
        ],
        documentation: [
            {
                title: 'Use case assessment criteria',
                url: '/web-pages/../resources/appendices/use-case-assessment.html',
                description: 'Detailed assessment methodology',
                tags: ['use-case', 'assessment', 'criteria']
            },
            {
                title: 'Impact assessment framework',
                url: '/web-pages/../resources/appendices/impact-assessment.html',
                description: 'Privacy, ethical, and social impact evaluation',
                tags: ['impact', 'privacy', 'ethics']
            }
        ],
        assessment: [
            {
                title: 'Use case assessment tool',
                url: '/web-pages/../tools/use-case-assessment.html',
                description: 'Interactive use case evaluation',
                tags: ['tool', 'use-case', 'assessment']
            }
        ],
        legal: [
            {
                title: 'Lawful pathways guide',
                url: '/web-pages/../resources/appendices/lawful-pathways.html',
                description: 'Legal pathway guidance for data sharing',
                tags: ['legal', 'pathways', 'data-sharing']
            }
        ]
    };

    function initializeRelatedResources() {
        populateResourceCategory('quick-access-grid', resourceDatabase.quickAccess, 3);
        populateResourceCategory('documentation-grid', resourceDatabase.documentation, 4);
        populateResourceCategory('assessment-grid', resourceDatabase.assessment, 3);
        populateResourceCategory('legal-grid', resourceDatabase.legal, 3);
        populateResourceCategory('technical-grid', [], 0);

        hideEmptyCategories();
    }

    function populateResourceCategory(gridId, resources, maxItems) {
        const grid = document.getElementById(gridId);
        if (!grid) return;

        if (resources.length === 0) {
            grid.parentElement.style.display = 'none';
            return;
        }

        grid.innerHTML = '';
        resources.slice(0, maxItems).forEach(resource => {
            const resourceElement = createResourceCard(resource);
            grid.appendChild(resourceElement);
        });
    }

    function createResourceCard(resource) {
        const card = document.createElement('div');
        card.className = 'resource-card';

        card.innerHTML = `
            <a href="${resource.url}" class="resource-link">
                <div class="resource-content">
                    <h5 class="resource-title">${resource.title}</h5>
                    <p class="resource-description">${resource.description}</p>
                    <div class="resource-tags">
                        ${resource.tags.slice(0, 3).map(tag =>
                            `<span class="resource-tag">${tag}</span>`
                        ).join('')}
                    </div>
                </div>
                <div class="resource-arrow">→</div>
            </a>
        `;

        return card;
    }

    function hideEmptyCategories() {
        const categories = document.querySelectorAll('.resource-category');
        categories.forEach(category => {
            const grid = category.querySelector('.resource-grid');
            if (!grid || grid.children.length === 0) {
                category.style.display = 'none';
            }
        });
    }

    // Initialize on page load
    initializeRelatedResources();
});
</script>

<!-- CSS for Content Tagging, Cross-Reference Navigation, and Related Resources -->

    <script>
        // Accordion functionality for scenarios
        document.addEventListener('DOMContentLoaded', function() {
            const scenarioHeaders = document.querySelectorAll('.scenario-header');
            
            scenarioHeaders.forEach(header => {
                header.addEventListener('click', function() {
                    const target = this.getAttribute('data-target');
                    const content = document.querySelector(target);
                    const icon = this.querySelector('.toggle-icon');
                    
                    if (content.classList.contains('show')) {
                        content.classList.remove('show');
                        icon.textContent = '+';
                    } else {
                        // Close all other scenarios
                        document.querySelectorAll('.scenario-content').forEach(sc => {
                            sc.classList.remove('show');
                        });
                        document.querySelectorAll('.toggle-icon').forEach(ti => {
                            ti.textContent = '+';
                        });
                        
                        // Open clicked scenario
                        content.classList.add('show');
                        icon.textContent = '−';
                    }
                });
            });
        });
    </script>

    <!-- OpenAI ChatKit Chatbot -->
    <link rel="stylesheet" href="../assets/chatbot/chatbot.css">
    <script src="https://cdn.platform.openai.com/deployments/chatkit/chatkit.js" async></script>
    <script src="../assets/chatbot/sloth-avatar.js"></script>
    <script src="../assets/chatbot/chatbot.js"></script>
</body>
</html>
